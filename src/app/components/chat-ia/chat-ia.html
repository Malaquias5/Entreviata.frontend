<div class="chat-container">
  <div class="chat-header">
    <h2>ğŸ’¬ Chat con IA para Entrevistas TÃ©cnicas</h2>
    <div class="chat-actions">
      <button (click)="probarConexion()" class="btn-test" title="Probar conexiÃ³n con backend">
        ğŸ” Probar ConexiÃ³n
      </button>
      <button (click)="limpiarChat()" class="btn-clear" title="Limpiar conversaciÃ³n">
        ğŸ—‘ï¸ Limpiar
      </button>
    </div>
  </div>

  <!-- Indicador de error -->
  <div *ngIf="ultimoError" class="error-banner">
    âš ï¸ Ãšltimo error: {{ ultimoError }}
  </div>
  
  <div class="messages" #messagesContainer>
    <div *ngFor="let message of mensajes" 
         [class.user-message]="message.esUsuario" 
         [class.bot-message]="!message.esUsuario" 
         class="message">
      <div class="message-content">{{ message.texto }}</div>
      <div class="message-time">{{ message.timestamp | date:'HH:mm:ss' }}</div>
    </div>
    
    <div *ngIf="cargando" class="loading">
      <div class="spinner"></div>
      â³ La IA estÃ¡ pensando...
    </div>

    <div *ngIf="mensajes.length === 0" class="empty-state">
      <p>ğŸ‘‹ Â¡Hola! Escribe una pregunta tÃ©cnica para comenzar.</p>
      <p class="hint">Ejemplo: "Â¿QuÃ© es Java?" o "ExplÃ­came Spring Boot"</p>
    </div>
  </div>

  <div class="input-area">
    <input 
      type="text" 
      [(ngModel)]="nuevaPregunta" 
      placeholder="Escribe tu pregunta tÃ©cnica..."
      (keyup.enter)="enviarPregunta()"
      class="input-field"
      [disabled]="cargando">
    
    <button (click)="enviarPregunta()" 
            class="btn-enviar"
            [disabled]="cargando || !nuevaPregunta.trim()">
      {{ cargando ? 'â³ Enviando...' : 'ğŸš€ Enviar' }}
    </button>
  </div>

  <div class="chat-footer">
    <small>Conectando a: http://localhost:8080/api/ia/preguntar</small>
  </div>
</div>